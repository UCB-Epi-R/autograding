[[1]]
$src
[1] "#################################################\n"

attr(,"class")
[1] "source"

[[2]]
$src
[1] "# R-for-Epi\n"

attr(,"class")
[1] "source"

[[3]]
$src
[1] "# Epidemiologic Methods II (PHW250F, PHW250G)\n"

attr(,"class")
[1] "source"

[[4]]
$src
[1] "# created by Jade Benjamin-Chung\n"

attr(,"class")
[1] "source"

[[5]]
$src
[1] "\n"

attr(,"class")
[1] "source"

[[6]]
$src
[1] "# Solutions: Homework 2, Prevalence\n"

attr(,"class")
[1] "source"

[[7]]
$src
[1] "#################################################\n"

attr(,"class")
[1] "source"

[[8]]
$src
[1] "# Load okR autograder\n"

attr(,"class")
[1] "source"

[[9]]
$src
[1] "source('setup/autograder-setup/hw2_prev/hw2_prev.ok.R')\n"

attr(,"class")
[1] "source"

[[10]]
<packageStartupMessage in packageStartupMessage(format_dr_here(show_reason = FALSE)): here() starts at /Users/Nolan/Desktop/grading-temp/hw-prev-trial copy
>

[[11]]
<simpleWarning: package ‘checkr’ was built under R version 3.5.2>

[[12]]
<simpleWarning: package ‘assertthat’ was built under R version 3.5.2>

[[13]]
<packageStartupMessage in packageStartupMessage(gettextf("\nAttaching package: %s\n", sQuote(package)),     domain = NA): 
Attaching package: ‘assertthat’

>

[[14]]
<packageStartupMessage in packageStartupMessage(msg, domain = NA): The following object is masked from ‘package:evaluate’:

    is.error

>

[[15]]
<simpleWarning: package ‘dplyr’ was built under R version 3.5.2>

[[16]]
<packageStartupMessage in packageStartupMessage(gettextf("\nAttaching package: %s\n", sQuote(package)),     domain = NA): 
Attaching package: ‘dplyr’

>

[[17]]
<packageStartupMessage in packageStartupMessage(msg, domain = NA): The following objects are masked from ‘package:stats’:

    filter, lag

>

[[18]]
<packageStartupMessage in packageStartupMessage(msg, domain = NA): The following objects are masked from ‘package:base’:

    intersect, setdiff, setequal, union

>

[[19]]
$src
[1] "AutograderInit()\n"

attr(,"class")
[1] "source"

[[20]]
$src
[1] "\n"

attr(,"class")
[1] "source"

[[21]]
$src
[1] "#################################################\n"

attr(,"class")
[1] "source"

[[22]]
$src
[1] "# Read in the data and view the data\n"

attr(,"class")
[1] "source"

[[23]]
$src
[1] "#################################################\n"

attr(,"class")
[1] "source"

[[24]]
$src
[1] "# Load the dplyr package\n"

attr(,"class")
[1] "source"

[[25]]
$src
[1] "library(dplyr)\n"

attr(,"class")
[1] "source"

[[26]]
$src
[1] "\n"

attr(,"class")
[1] "source"

[[27]]
$src
[1] "# This assignment uses data from the WASH Benefits\n"

attr(,"class")
[1] "source"

[[28]]
$src
[1] "# Bangladesh trial. The trial assessed whether \n"

attr(,"class")
[1] "source"

[[29]]
$src
[1] "# water, sanitation, handwashing, and nutrition \n"

attr(,"class")
[1] "source"

[[30]]
$src
[1] "# interventions delivered separately or together\n"

attr(,"class")
[1] "source"

[[31]]
$src
[1] "# could reduce child diarrhea and/or improve child\n"

attr(,"class")
[1] "source"

[[32]]
$src
[1] "# growth. The trials used a cluster- and block-randomized \n"

attr(,"class")
[1] "source"

[[33]]
$src
[1] "# design. Within each geographic block, 8 village clusters\n"

attr(,"class")
[1] "source"

[[34]]
$src
[1] "# were randomized to a treatment or conrtol arm. \n"

attr(,"class")
[1] "source"

[[35]]
$src
[1] "# See Luby et al. 2018 for full details \n"

attr(,"class")
[1] "source"

[[36]]
$src
[1] "# (doi: http://dx.doi.org/10.1016/)\n"

attr(,"class")
[1] "source"

[[37]]
$src
[1] "\n"

attr(,"class")
[1] "source"

[[38]]
$src
[1] "# In this problem set we will calculate the prevalence\n"

attr(,"class")
[1] "source"

[[39]]
$src
[1] "# of diarrhea in different treatment arms after the \n"

attr(,"class")
[1] "source"

[[40]]
$src
[1] "# interventions were delivered. \n"

attr(,"class")
[1] "source"

[[41]]
$src
[1] "\n"

attr(,"class")
[1] "source"

[[42]]
$src
[1] "# The data and codebooks are publicly available here: \n"

attr(,"class")
[1] "source"

[[43]]
$src
[1] "# https://osf.io/pqzj5/\n"

attr(,"class")
[1] "source"

[[44]]
$src
[1] "\n"

attr(,"class")
[1] "source"

[[45]]
$src
[1] "# Load the diarrhea dataset:\n"

attr(,"class")
[1] "source"

[[46]]
$src
[1] "\n"

attr(,"class")
[1] "source"

[[47]]
$src
[1] "d = read.csv(paste0(here::here(),\"/data/washb-data/washb-bangladesh-diar-public.csv\"))\n"

attr(,"class")
[1] "source"

[[48]]
$src
[1] "\n"

attr(,"class")
[1] "source"

[[49]]
$src
[1] "# Load the dataset with treatment variables: \n"

attr(,"class")
[1] "source"

[[50]]
$src
[1] "tr = read.csv(paste0(here::here(),\"/data/washb-data/washb-bangladesh-tr-public.csv\"))\n"

attr(,"class")
[1] "source"

[[51]]
$src
[1] "\n"

attr(,"class")
[1] "source"

[[52]]
$src
[1] "# Next let's merge the two datasets together.\n"

attr(,"class")
[1] "source"

[[53]]
$src
[1] "# This will allow us to calculate the prevalence\n"

attr(,"class")
[1] "source"

[[54]]
$src
[1] "# of diarrhea in different treatment arms \n"

attr(,"class")
[1] "source"

[[55]]
$src
[1] "# (e.g., water, sanitation, handwashing, etc.)\n"

attr(,"class")
[1] "source"

[[56]]
$src
[1] "\n"

attr(,"class")
[1] "source"

[[57]]
$src
[1] "d_tr = left_join(d, tr, by=c(\"block\",\"clusterid\"))\n"

attr(,"class")
[1] "source"

[[58]]
$src
[1] "\n"

attr(,"class")
[1] "source"

[[59]]
$src
[1] "# Now let's filter to only keep the rows for diarrhea\n"

attr(,"class")
[1] "source"

[[60]]
$src
[1] "# measurements after the interventions were delivered. \n"

attr(,"class")
[1] "source"

[[61]]
$src
[1] "# The svy variable includes values 0, 1, 2. We are going\n"

attr(,"class")
[1] "source"

[[62]]
$src
[1] "# to drop the 0 values, which indicate the time period\n"

attr(,"class")
[1] "source"

[[63]]
$src
[1] "# before interventions were delivered. \n"

attr(,"class")
[1] "source"

[[64]]
$src
[1] "d_tr = d_tr %>% filter(svy!=0)\n"

attr(,"class")
[1] "source"

[[65]]
$src
[1] "\n"

attr(,"class")
[1] "source"

[[66]]
$src
[1] "# Now we are going to drop children with missing values \n"

attr(,"class")
[1] "source"

[[67]]
$src
[1] "# in the diarrhea variable from the dataset. This \n"

attr(,"class")
[1] "source"

[[68]]
$src
[1] "# assumes that they were missing completely at random - i.e., \n"

attr(,"class")
[1] "source"

[[69]]
$src
[1] "# that there are no characteristics associated with whether\n"

attr(,"class")
[1] "source"

[[70]]
$src
[1] "# a child was missing diarrhea measurement. \n"

attr(,"class")
[1] "source"

[[71]]
$src
[1] "d_tr = d_tr %>% filter(!is.na(diar7d))\n"

attr(,"class")
[1] "source"

[[72]]
$src
[1] "\n"

attr(,"class")
[1] "source"

[[73]]
$src
[1] "# Take a look at the merged dataset:\n"

attr(,"class")
[1] "source"

[[74]]
$src
[1] "head(d_tr)\n"

attr(,"class")
[1] "source"

[[75]]
[1] "  dataid childid       tchild clusterid block svy month    sex agedays   ageyrs\n1  28001      C1      Sibling       280     1   2    10 female    1537 4.208076\n2  28001      T1 Target child       280     1   2    10   male     659 1.804244\n3  28001      T1 Target child       280     1   1     9   male     268 0.733744\n4  28001      C1      Sibling       280     1   1     9 female    1146 3.137577\n5  28002      C1      Sibling       280     1   1     9 female    1525 4.175222\n6  28002      C1      Sibling       280     1   2    10 female    1916 5.245722\n    enrolage newbirth sibnewbirth gt36mos d3plus2d d3plus7d dloose2d dloose7d\n1  1.9329227        0           0       0        0        0        0        0\n2 -0.4709103        1           0       0        0        0        0        0\n3 -0.4709103        1           0       0        0        0        0        0\n4  1.9329227        0           0       0        0        0        0        0\n5  2.9705681        0           0       0        0        0        0        0\n6  2.9705681        0           0       0        0        0        0        0\n  dblood2d dblood7d diar2d diar7d bruise2d bruise7d tooth2d tooth7d svyweek\n1        0        0      0      0        0        0       0       0      42\n2        0        0      0      0        0        0       0       0      42\n3        0        0      0      0        0        0       0       0      38\n4        0        0      0      0        0        0       0       0      38\n5        0        0      0      0        0        0       0       0      38\n6        0        0      0      0        0        0       0       0      42\n  svyyear         tr\n1    2015 Sanitation\n2    2015 Sanitation\n3    2014 Sanitation\n4    2014 Sanitation\n5    2014 Sanitation\n6    2015 Sanitation\n"

[[76]]
$src
[1] "\n"

attr(,"class")
[1] "source"

[[77]]
$src
[1] "#-----------------------------------------------\n"

attr(,"class")
[1] "source"

[[78]]
$src
[1] "# Problem 1: Calculate the number of children with\n"

attr(,"class")
[1] "source"

[[79]]
$src
[1] "# diarrhea across all children in the dataset \n"

attr(,"class")
[1] "source"

[[80]]
$src
[1] "# (ie., not stratifing by the treatment variable). \n"

attr(,"class")
[1] "source"

[[81]]
$src
[1] "# Use the variable diar7d for diarrhea. \n"

attr(,"class")
[1] "source"

[[82]]
$src
[1] "# Save your result in an object called p1. \n"

attr(,"class")
[1] "source"

[[83]]
$src
[1] "# Label the result inside p1 as n_with_diarrhea\n"

attr(,"class")
[1] "source"

[[84]]
$src
[1] "# Hint: Using the code from the tutorial, change\n"

attr(,"class")
[1] "source"

[[85]]
$src
[1] "# the part that says \"n_with_disease\" to say \n"

attr(,"class")
[1] "source"

[[86]]
$src
[1] "# \"n_with_diarrhea\"\n"

attr(,"class")
[1] "source"

[[87]]
$src
[1] "#-----------------------------------------------\n"

attr(,"class")
[1] "source"

[[88]]
$src
[1] "p1 = d_tr %>%\n     filter(diar7d==0) %>%\n    summarise(x=n())\n"

attr(,"class")
[1] "source"

[[89]]
$src
[1] "p1\n"

attr(,"class")
[1] "source"

[[90]]
[1] "      x\n1 15966\n"

[[91]]
$src
[1] "\n"

attr(,"class")
[1] "source"

[[92]]
$src
[1] "# Check your answer\n"

attr(,"class")
[1] "source"

[[93]]
$src
[1] "CheckProblem1()\n"

attr(,"class")
[1] "source"

[[94]]
<assertError: Did you remember to filter to only show results for children with diarrhea?>

[[95]]
$src
[1] "\n"

attr(,"class")
[1] "source"

[[96]]
$src
[1] "#-----------------------------------------------\n"

attr(,"class")
[1] "source"

[[97]]
$src
[1] "# Problem 2: Calculate the number of children without\n"

attr(,"class")
[1] "source"

[[98]]
$src
[1] "# diarrhea across all children in the dataset \n"

attr(,"class")
[1] "source"

[[99]]
$src
[1] "# (ie., not stratifing by the treatment variable). \n"

attr(,"class")
[1] "source"

[[100]]
$src
[1] "# Use the variable diar7d for diarrhea. \n"

attr(,"class")
[1] "source"

[[101]]
$src
[1] "# Save your result in an object called p2.  \n"

attr(,"class")
[1] "source"

[[102]]
$src
[1] "# Label the result inside p1 as n_without_diarrhea\n"

attr(,"class")
[1] "source"

[[103]]
$src
[1] "#-----------------------------------------------\n"

attr(,"class")
[1] "source"

[[104]]
$src
[1] "p2 = d_tr %>%\n     filter(diar7d==0) %>%\n     summarise(n_without_diarrhea=n())\n"

attr(,"class")
[1] "source"

[[105]]
$src
[1] "p2\n"

attr(,"class")
[1] "source"

[[106]]
[1] "  n_without_diarrhea\n1              15966\n"

[[107]]
$src
[1] "\n"

attr(,"class")
[1] "source"

[[108]]
$src
[1] "# Check your answer\n"

attr(,"class")
[1] "source"

[[109]]
$src
[1] "CheckProblem2()\n"

attr(,"class")
[1] "source"

[[110]]
[1] "[1] \"Correct!\"\nProblem 2: 1/1\n"

[[111]]
$src
[1] "\n"

attr(,"class")
[1] "source"

[[112]]
$src
[1] "#-----------------------------------------------\n"

attr(,"class")
[1] "source"

[[113]]
$src
[1] "# Problem 3: Calculate diarrhea prevalence in the \n"

attr(,"class")
[1] "source"

[[114]]
$src
[1] "# whole dataset (ignoring treatment arm) and \n"

attr(,"class")
[1] "source"

[[115]]
$src
[1] "# save it in an object called prevalence.\n"

attr(,"class")
[1] "source"

[[116]]
$src
[1] "#-----------------------------------------------\n"

attr(,"class")
[1] "source"

[[117]]
$src
[1] "prevalence = d_tr %>% summarise(prevalence=mean(diar7d))\n"

attr(,"class")
[1] "source"

[[118]]
$src
[1] "prevalence\n"

attr(,"class")
[1] "source"

[[119]]
[1] "  prevalence\n1 0.04549531\n"

[[120]]
$src
[1] "\n"

attr(,"class")
[1] "source"

[[121]]
$src
[1] "# Check your answer\n"

attr(,"class")
[1] "source"

[[122]]
$src
[1] "CheckProblem3()\n"

attr(,"class")
[1] "source"

[[123]]
[1] "[1] \"Correct!\"\nProblem 3: 1/1\n"

[[124]]
$src
[1] "\n"

attr(,"class")
[1] "source"

[[125]]
$src
[1] "#-----------------------------------------------\n"

attr(,"class")
[1] "source"

[[126]]
$src
[1] "# Problem 4: Now let's get counts of whether children\n"

attr(,"class")
[1] "source"

[[127]]
$src
[1] "# did or did not have diarrhea in each treatment arm. \n"

attr(,"class")
[1] "source"

[[128]]
$src
[1] "# In the tutorial, this created a 2x2 table for us.\n"

attr(,"class")
[1] "source"

[[129]]
$src
[1] "# Here, since the WASH Benefits trial, there were \n"

attr(,"class")
[1] "source"

[[130]]
$src
[1] "# 7 different arms (6 intervention + control) \n"

attr(,"class")
[1] "source"

[[131]]
$src
[1] "# create a data frame with 14 rows (two for each arm). \n"

attr(,"class")
[1] "source"

[[132]]
$src
[1] "# The first column is called \"tr\" for treatment. \n"

attr(,"class")
[1] "source"

[[133]]
$src
[1] "# The second column is called \"diar7d\" and includes 0\n"

attr(,"class")
[1] "source"

[[134]]
$src
[1] "# for children without diarrhea and 1 for children with\n"

attr(,"class")
[1] "source"

[[135]]
$src
[1] "# diarrhea. The third column is called \"n\" and includes the\n"

attr(,"class")
[1] "source"

[[136]]
$src
[1] "# number of children with or without diarrhea in that arm. \n"

attr(,"class")
[1] "source"

[[137]]
$src
[1] "\n"

attr(,"class")
[1] "source"

[[138]]
$src
[1] "# Hint: the row for Control with no diarrhea should be this: \n"

attr(,"class")
[1] "source"

[[139]]
$src
[1] "# tr              diar7d     n\n"

attr(,"class")
[1] "source"

[[140]]
$src
[1] "# Control              0  3782\n"

attr(,"class")
[1] "source"

[[141]]
$src
[1] "#-----------------------------------------------\n"

attr(,"class")
[1] "source"

[[142]]
$src
[1] "diar_tr_table = d_tr %>%\n                group_by(tr,diar7d) %>%\n                summarise(n=n())\n"

attr(,"class")
[1] "source"

[[143]]
$src
[1] "\n"

attr(,"class")
[1] "source"

[[144]]
$src
[1] "diar_tr_table\n"

attr(,"class")
[1] "source"

[[145]]
[1] "# A tibble: 14 x 3\n# Groups:   tr [7]\n   tr              diar7d     n\n   <fct>            <int> <int>\n 1 Control              0  3782\n 2 Control              1   240\n 3 Handwashing          0  1976\n 4 Handwashing          1    81\n 5 Nutrition            0  1974\n 6 Nutrition            1    78\n 7 Nutrition + WSH      0  2092\n 8 Nutrition + WSH      1    82\n 9 Sanitation           0  1995\n10 Sanitation           1    73\n11 Water                0  1998\n12 Water                1   112\n13 WSH                  0  2149\n14 WSH                  1    95\n"

[[146]]
$src
[1] "\n"

attr(,"class")
[1] "source"

[[147]]
$src
[1] "# Check your answer\n"

attr(,"class")
[1] "source"

[[148]]
$src
[1] "CheckProblem4()\n"

attr(,"class")
[1] "source"

[[149]]
[1] "[1] \"Correct!\"\nProblem 4: 1/1\n"

[[150]]
$src
[1] "\n"

attr(,"class")
[1] "source"

[[151]]
$src
[1] "#-----------------------------------------------\n"

attr(,"class")
[1] "source"

[[152]]
$src
[1] "# Problem 5: Calculate the diarrhea prevalence in  \n"

attr(,"class")
[1] "source"

[[153]]
$src
[1] "# each treatment arm. You will need to combine\n"

attr(,"class")
[1] "source"

[[154]]
$src
[1] "# different commands used in this problem set \n"

attr(,"class")
[1] "source"

[[155]]
$src
[1] "# to calculate this. Save the results in an object\n"

attr(,"class")
[1] "source"

[[156]]
$src
[1] "# called prevalence_tr. It should have 7 rows (one\n"

attr(,"class")
[1] "source"

[[157]]
$src
[1] "# for each treatment) and two columns. The first \n"

attr(,"class")
[1] "source"

[[158]]
$src
[1] "# column should be for the treatment name and the\n"

attr(,"class")
[1] "source"

[[159]]
$src
[1] "# second should be for the prevalence. \n"

attr(,"class")
[1] "source"

[[160]]
$src
[1] "#-----------------------------------------------\n"

attr(,"class")
[1] "source"

[[161]]
$src
[1] "prevalence_tr = d_tr %>% \n                group_by(tr) %>%\n                summarise(prevalence=mean(diar7d))\n"

attr(,"class")
[1] "source"

[[162]]
$src
[1] "prevalence_tr\n"

attr(,"class")
[1] "source"

[[163]]
[1] "# A tibble: 7 x 2\n  tr              prevalence\n  <fct>                <dbl>\n1 Control             0.0597\n2 Handwashing         0.0394\n3 Nutrition           0.0380\n4 Nutrition + WSH     0.0377\n5 Sanitation          0.0353\n6 Water               0.0531\n7 WSH                 0.0423\n"

[[164]]
$src
[1] "\n"

attr(,"class")
[1] "source"

[[165]]
$src
[1] "# Check your answer\n"

attr(,"class")
[1] "source"

[[166]]
$src
[1] "CheckProblem5()\n"

attr(,"class")
[1] "source"

[[167]]
[1] "[1] \"Correct!\"\nProblem 5: 1/1\n"

[[168]]
$src
[1] "\n"

attr(,"class")
[1] "source"

[[169]]
$src
[1] "#-----------------------------------------------\n"

attr(,"class")
[1] "source"

[[170]]
$src
[1] "# Problem 6: Examine the results in prevalence_tr.\n"

attr(,"class")
[1] "source"

[[171]]
$src
[1] "# Which arm had the lowest diarrhea prevalence? \n"

attr(,"class")
[1] "source"

[[172]]
$src
[1] "# Save the name of the treatment arm using the\n"

attr(,"class")
[1] "source"

[[173]]
$src
[1] "# same spelling as in the treatment label in \n"

attr(,"class")
[1] "source"

[[174]]
$src
[1] "# prevalence_tr to indicate your answer in an\n"

attr(,"class")
[1] "source"

[[175]]
$src
[1] "# object called p6. (e.g., p6 = \"Control\")\n"

attr(,"class")
[1] "source"

[[176]]
$src
[1] "#-----------------------------------------------\n"

attr(,"class")
[1] "source"

[[177]]
$src
[1] "p6 = \"Sanitation\"\n"

attr(,"class")
[1] "source"

[[178]]
$src
[1] "\n"

attr(,"class")
[1] "source"

[[179]]
$src
[1] "# Check your answer\n"

attr(,"class")
[1] "source"

[[180]]
$src
[1] "CheckProblem6()\n"

attr(,"class")
[1] "source"

[[181]]
[1] "[1] \"Correct!\"\nProblem 6: 1/1\n"

[[182]]
$src
[1] "\n"

attr(,"class")
[1] "source"

[[183]]
$src
[1] "#-----------------------------------------------\n"

attr(,"class")
[1] "source"

[[184]]
$src
[1] "# Problem 7: Which treatment arm had prevalence\n"

attr(,"class")
[1] "source"

[[185]]
$src
[1] "# closest to the prevalence in the control arm? \n"

attr(,"class")
[1] "source"

[[186]]
$src
[1] "# Save the name of the treatment arm using the\n"

attr(,"class")
[1] "source"

[[187]]
$src
[1] "# same spelling as in the treatment label in \n"

attr(,"class")
[1] "source"

[[188]]
$src
[1] "# prevalence_tr to indicate your answer in an\n"

attr(,"class")
[1] "source"

[[189]]
$src
[1] "# object called p6. (e.g., p7 = \"Control\")\n"

attr(,"class")
[1] "source"

[[190]]
$src
[1] "#-----------------------------------------------\n"

attr(,"class")
[1] "source"

[[191]]
$src
[1] "p7 = \"Water\"\n"

attr(,"class")
[1] "source"

[[192]]
$src
[1] "\n"

attr(,"class")
[1] "source"

[[193]]
$src
[1] "# Check your answer\n"

attr(,"class")
[1] "source"

[[194]]
$src
[1] "CheckProblem7()\n"

attr(,"class")
[1] "source"

[[195]]
[1] "[1] \"Correct!\"\nProblem 7: 1/1\n"

[[196]]
$src
[1] "\n"

attr(,"class")
[1] "source"

[[197]]
$src
[1] "# --------------------------------------------\n"

attr(,"class")
[1] "source"

[[198]]
$src
[1] "# Check your total score\n"

attr(,"class")
[1] "source"

[[199]]
$src
[1] "MyTotalScore()\n"

attr(,"class")
[1] "source"

[[200]]
[1] "                \nProblem 1:   0/1\nProblem 2:   1/1\nProblem 3:   1/1\nProblem 4:   1/1\nProblem 5:   1/1\nProblem 6:   1/1\nProblem 7:   1/1\nTotal Score: 6/7\n"

[[201]]
$src
[1] "# --------------------------------------------\n"

attr(,"class")
[1] "source"

[[202]]
$src
[1] "\n"

attr(,"class")
[1] "source"

